..parse   = new import
..compile = new import


#
# expr where clause
#
# Syntactic sugar for
#
#    call () ->
#      clause
#      expr
#
compile.r.builtins !! 'where' = (self, expr, clause) ->
  self.function (parse.tree.Constant None) $
    e = parse.tree.Expression [parse.tree.Link '\n', clause, expr]
    e.in_between expr clause
  self.call None preloaded: 0
